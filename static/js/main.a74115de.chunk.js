(this["webpackJsonplocations-of-interest"]=this["webpackJsonplocations-of-interest"]||[]).push([[0],{103:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),o=r(11),c=r.n(o),s=(r(92),r(137)),i=r(148),u=r(18),l=r(76),b=r(146),d=r(147),j=r(45),f=function(){return Object(j.b)()},p=j.c,x=r(34),h=r.n(x),O=r(51),y=r(46),v={locale:"en-NZ"};function m(t,e,r){return e&&r?t>=e&&t<r:e?t>=e:!r||t<r}var g={locations:function(t,e){if(!e)return t;var r=function(t){var e={text:t.text,suburb:t.suburb,updatedFrom:t.updatedFrom?t.updatedFrom:void 0,updatedTo:t.updatedTo?t.updatedTo:void 0,dayTo:t.dayTo?t.dayTo:void 0,dayFrom:t.dayFrom?t.dayFrom:void 0};if(e.text=e.text.toLocaleLowerCase(v.locale),e.suburb=e.suburb.toLocaleLowerCase(v.locale),e.updatedFrom){var r=new Date(e.updatedFrom);r.setDate(r.getDate()+1),r.setMinutes(r.getMinutes()-1),e.updatedTo=r.getTime()}if(e.dayTo){var n=new Date(e.dayTo);n.setDate(n.getDate()+1),n.setMinutes(n.getMinutes()-1),e.dayTo=n.getTime()}return e}(e);return t.filter((function(t){return function(t,e){return!e||-1!==t.search.indexOf(e)}(t,r.text)&&function(t,e){return!e||!!t.suburb&&t.suburb.toLocaleLowerCase(v.locale)===e}(t,r.suburb)&&m(t.updated,r.updatedFrom,r.updatedTo)&&m(t.day,r.dayFrom,r.dayTo)}))}},T=r(77);var L={numbers:function(t,e,r){var n=t-e;return r||(n*=-1),n},strings:function(t,e,r){if(!t||""===t)return 1;var n=(t||"").localeCompare(e||"");return r||(n*=-1),n}};var C,S={locations:function(t,e){var r=e.property;return"id"===r||"day"===r||"updated"===r?t.sort((function(t,n){return L.numbers(t[r],n[r],e.asc)})):t.sort((function(t,n){return L.strings(t[r],n[r],e.asc)})),Object(T.a)(t)},defaultSort:"id"},k="https://raw.githubusercontent.com/JulianScap/locations-of-interest/main/json/locations-of-interest.json",D="idle";function F(){return w.apply(this,arguments)}function w(){return(w=Object(O.a)(h.a.mark((function t(){var e,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!C&&"busy"!==D&&"ready"!==D){t.next=2;break}return t.abrupt("return",C||[]);case 2:return D="busy",e=1,t.next=6,fetch(k).then((function(t){return t.json()})).then((function(t){return t.map((function(t){var r=Object(u.a)(Object(u.a)({},t),{},{day:new Date(t.day).getTime(),updated:new Date(t.updated).getTime(),id:e++});return r.search=[r.city,r.locationName,r.postCode,r.streetAddress,r.suburb].join("\n").toLocaleLowerCase(v.locale),r}))}));case 6:return r=t.sent,C=r,D="ready",t.abrupt("return",r||[]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=Object(y.b)("locations-of-interest/setAllLocations",Object(O.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),I=function(t){console.log("Filtering",JSON.stringify(t.search),JSON.stringify(t.sort));var e=g.locations(t.allLocations,t.search);return S.locations(e,t.sort)},N=function(t){var e;return t&&(e=new Date(t).getTime()),e},P=Object(y.c)({name:"locations-of-interest",initialState:{allLocations:[],visibleLocations:[],suburbs:[],search:{suburb:"",text:""},sort:{property:"id",asc:!0}},reducers:{setAllLocations:function(t,e){t.allLocations=e.payload,t.suburbs=t.allLocations.map((function(t){return t.suburb})).filter((function(t,e,r){return!!t&&r.indexOf(t)===e&&!t.startsWith("RD")})).sort(),t.visibleLocations=I(t)},applySuburb:function(t,e){t.search.suburb=e.payload,t.visibleLocations=I(t)},filterDayFrom:function(t,e){t.search.dayFrom=N(e.payload),t.visibleLocations=I(t)},filterDayTo:function(t,e){t.search.dayTo=N(e.payload),t.visibleLocations=I(t)},filterUpdatedDate:function(t,e){t.search.updatedFrom=N(e.payload),t.visibleLocations=I(t)},filterText:function(t,e){t.search.text=e.payload,t.visibleLocations=I(t)},applySort:function(t,e){var r,n=e.payload;r=t.sort.property!==n||!t.sort.asc,t.sort={asc:r,property:n},t.visibleLocations=S.locations(t.visibleLocations,t.sort)}},extraReducers:function(t){t.addCase(A.fulfilled,(function(t,e){t.visibleLocations=t.allLocations=e.payload,t.suburbs=t.allLocations.map((function(t){return t.suburb})).filter((function(t,e,r){return!!t&&r.indexOf(t)===e&&!t.startsWith("RD")})).sort()}))}}),J=P.actions,M=J.applySuburb,U=J.applySort,R=J.filterUpdatedDate,E=J.filterDayTo,B=J.filterDayFrom,W=J.filterText,_=function(t){return t.locations.sort},q=function(t){return t.locations.visibleLocations},H=function(t){return t.locations.suburbs},Z=P.reducer,z=r(4);var G=function(){var t=p(H),e=f(),r=Object(n.useState)(""),a=Object(l.a)(r,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){e(W(o))}),500);return function(){return clearTimeout(t)}}),[o,e]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{label:"Search",variant:"outlined",style:{flex:1},onChange:function(t){return c(t.currentTarget.value)}}),"\xa0",Object(z.jsx)(b.a,{InputLabelProps:{shrink:!0},label:"Day from",variant:"outlined",type:"Date",style:{flex:1},onChange:function(t){return e(B(t.currentTarget.value))}}),"\xa0",Object(z.jsx)(b.a,{InputLabelProps:{shrink:!0},label:"Day to",variant:"outlined",type:"Date",style:{flex:1},onChange:function(t){return e(E(t.currentTarget.value))}}),"\xa0",Object(z.jsx)(b.a,{InputLabelProps:{shrink:!0},label:"Updated date",variant:"outlined",type:"Date",style:{flex:1},onChange:function(t){return e(R(t.currentTarget.value))}}),"\xa0",Object(z.jsx)(d.a,{options:t,style:{flex:1,display:"inline-block"},renderInput:function(t){return Object(z.jsx)(b.a,Object(u.a)(Object(u.a)({},t),{},{label:"Suburb",variant:"outlined"}))},onChange:function(t,r){e(M(r||""))}})]})},K=r(142),Q=r(143),V=r(140),X=r(141),Y=r(144),$=r(68),tt=r(69),et=r(78),rt=r(75),nt=r(5),at=r(149),ot=Object(nt.a)((function(t){return Object(at.a)({root:{"&:nth-of-type(odd)":{backgroundColor:"white"},"&:nth-of-type(even)":{backgroundColor:"cornsilk"}}})}))(V.a),ct=r(70),st=r.n(ct),it=function(t){Object(et.a)(r,t);var e=Object(rt.a)(r);function r(t){var n;return Object($.a)(this,r),(n=e.call(this,t)).state={location:Object(u.a)({},t.location)},n}return Object(tt.a)(r,[{key:"render",value:function(){return Object(z.jsxs)(ot,{children:[Object(z.jsx)(X.a,{children:Object(z.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://duckduckgo.com/?ia=web&iaxm=maps&q="+encodeURIComponent(this.state.location.address),children:Object(z.jsx)(st.a,{})})}),Object(z.jsx)(X.a,{children:Object(z.jsx)("span",{title:this.state.location.whatToDo,children:this.state.location.locationName})}),Object(z.jsx)(X.a,{children:this.state.location.streetAddress}),Object(z.jsx)(X.a,{children:this.state.location.suburb}),Object(z.jsx)(X.a,{children:this.state.location.city}),Object(z.jsx)(X.a,{children:this.state.location.postCode}),Object(z.jsx)(X.a,{children:this.state.location.dayAsString}),Object(z.jsx)(X.a,{children:this.state.location.times}),Object(z.jsx)(X.a,{children:this.state.location.updatedAsString})]})}}]),r}(n.PureComponent),ut=r(79),lt=r(72),bt=r.n(lt),dt=r(73),jt=r.n(dt),ft=r(71),pt=r.n(ft),xt=["text","currentSort"];var ht=function(t){var e,r,n,a=t.text,o=t.currentSort,c=Object(ut.a)(t,xt),s=(e=t.sortproperty,r=o.property,n=o.asc,e!==r?Object(z.jsx)(pt.a,{}):n?Object(z.jsx)(bt.a,{}):Object(z.jsx)(jt.a,{}));return Object(z.jsxs)(X.a,Object(u.a)(Object(u.a)({},c),{},{children:[a," ",s]}))};var Ot=function(){var t=f(),e=p(_),r=p(q),n=function(e){var r=e.currentTarget.getAttribute("sortproperty")||S.defaultSort;t(U(r))};return Object(z.jsxs)(K.a,{stickyHeader:!0,children:[Object(z.jsx)(Q.a,{children:Object(z.jsxs)(V.a,{children:[Object(z.jsx)(X.a,{children:"Maps"}),Object(z.jsx)(ht,{onClick:n,sortproperty:"locationName",text:"Location Name",currentSort:e}),Object(z.jsx)(ht,{onClick:n,sortproperty:"streetAddress",text:"Street address",currentSort:e}),Object(z.jsx)(ht,{onClick:n,sortproperty:"suburb",text:"Suburb",currentSort:e}),Object(z.jsx)(ht,{onClick:n,sortproperty:"city",text:"City",currentSort:e}),Object(z.jsx)(ht,{onClick:n,sortproperty:"postCode",text:"Post code",currentSort:e}),Object(z.jsx)(ht,{onClick:n,sortproperty:"day",text:"Day",currentSort:e}),Object(z.jsx)(X.a,{children:"Times"}),Object(z.jsx)(ht,{onClick:n,sortproperty:"updated",text:"Updated",currentSort:e})]})}),Object(z.jsx)(Y.a,{children:(r||[]).map((function(t){return Object(z.jsx)(it,{location:t},t.id)}))})]})},yt=r(74),vt=r.n(yt);var mt=function(){var t=p(q),e=f();return Object(n.useEffect)((function(){var t=setTimeout((function(){e(A())}),500);return function(){return clearTimeout(t)}}),[e]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{style:{display:"flex"},children:[Object(z.jsx)(G,{}),"\xa0",Object(z.jsx)(s.a,{style:{flex:1,textAlign:"right"},children:Object(z.jsx)(i.a,{children:"Count: "+t.length})}),"\xa0",Object(z.jsx)("a",{href:"https://github.com/JulianScap/locations-of-interest",target:"_blank",rel:"noreferrer",children:Object(z.jsx)(vt.a,{})})]}),Object(z.jsx)(Ot,{})]})};var gt=function(){return Object(z.jsxs)(a.a.Fragment,{children:[Object(z.jsx)("br",{}),Object(z.jsx)(mt,{})]})},Tt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,151)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;r(t),n(t),a(t),o(t),c(t)}))},Lt=Object(y.a)({reducer:{locations:Z}}),Ct=r(145);c.a.render(Object(z.jsxs)(a.a.StrictMode,{children:[Object(z.jsx)(Ct.a,{}),Object(z.jsx)(j.a,{store:Lt,children:Object(z.jsx)(gt,{})})]}),document.getElementById("root")),Tt()},92:function(t,e,r){}},[[103,1,2]]]);
//# sourceMappingURL=main.a74115de.chunk.js.map